<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:JamBox.Core.ViewModels"
             xmlns:converters="using:JamBox.Core.Converters"
             x:Class="JamBox.Core.Views.LoginView"
             x:DataType="vm:LoginViewModel">

	<UserControl.Resources>
		<converters:IsNotNullConverter x:Key="IsNotNullConverter"/>
	</UserControl.Resources>

	<Design.DataContext>
		<vm:LoginViewModel />
	</Design.DataContext>

	<Grid RowDefinitions="Auto, Auto, Auto, *" Background="#1a202c">
		<TextBlock Grid.Row="0" Text="ðŸŽ¶ Jam Box ðŸŽ¶"
				   HorizontalAlignment="Center" VerticalAlignment="Center"
				   Margin="20"
				   FontSize="32" FontWeight="Bold" Foreground="#66CCCC"/>

		<StackPanel Grid.Row="1" Margin="20" Spacing="15">
			<TextBox Watermark="Server URL"
					 Text="{Binding ServerUrl}"
					 HorizontalAlignment="Stretch"
					 VerticalAlignment="Center"
					 Classes="login-input"
					 Background="#2d3748"
					 Foreground="#cbd5e0"
					 BorderBrush="#4a5568"
					 CaretBrush="#cbd5e0"/>

			<TextBox Watermark="Username"
					 Text="{Binding Username}"
					 HorizontalAlignment="Stretch"
					 VerticalAlignment="Center"
					 Classes="login-input"
					 Background="#2d3748"
					 Foreground="#cbd5e0"
					 BorderBrush="#4a5568"
					 CaretBrush="#cbd5e0"/>

			<TextBox Watermark="Password"
					 PasswordChar="*"
					 Text="{Binding Password}"
					 HorizontalAlignment="Stretch"
					 VerticalAlignment="Center"
					 Classes="login-input"
					 Background="#2d3748"
					 Foreground="#cbd5e0"
					 BorderBrush="#4a5568"
					 CaretBrush="#cbd5e0"/>

			<Button Content="Connect"
					Command="{Binding ConnectCommand}"
					HorizontalAlignment="Stretch"
					VerticalAlignment="Center"
					Background="#66CCCC"
					Foreground="#1a202c"
					FontWeight="Bold"
					Classes="connect-button"/>
		</StackPanel>

		<TextBlock Grid.Row="2" Text="{Binding ConnectionStatus}"
				   HorizontalAlignment="Center" VerticalAlignment="Top"
				   Margin="20,10,20,0"
				   FontSize="16" FontWeight="SemiBold"
				   TextWrapping="Wrap"
				   Foreground="#cbd5e0"/>

		<ScrollViewer Grid.Row="3" Margin="20,0,20,20" VerticalScrollBarVisibility="Auto">
			<StackPanel IsVisible="{Binding ServerInfo, Converter={StaticResource IsNotNullConverter}}" Spacing="10">
				<TextBlock Text="{Binding ServerInfo.ServerName, StringFormat='Server: {0}'}"
						   FontSize="16" FontWeight="Bold" Foreground="#66CCCC"/>
				<TextBlock Text="{Binding ServerInfo.Version, StringFormat='Version: {0}'}"
						   FontSize="14" Foreground="#a0aec0"/>

				<ListBox ItemsSource="{Binding UserLibraries}"
					 SelectedItem="{Binding SelectedLibrary}"
					 Background="Transparent"
					 BorderThickness="0"
					 SelectionMode="Single">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border BorderBrush="#4a5568" BorderThickness="1" CornerRadius="5" Padding="10" Margin="0,5">
								<StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
									<TextBlock Text="{Binding Name}"
											   FontSize="14" FontWeight="SemiBold"
											   Foreground="#cbd5e0"/>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</StackPanel>
		</ScrollViewer>
	</Grid>
</UserControl>